In a group of two, write a Bash script to do the following:

1) Install mysql database on Ubuntu, and start it accordingly.

2) Similarly, install Apache Web server and start that as well.

3) Make sure the installed database and web server start automatically on boot.

4) Make the Apache web server run as fast as possible.

5) Every 10 minutes, get the last 100 log messages generated by the web server. Store these log messages in a file under the directory /var/log/web. The name of the file should adhere to the following pattern: log-apache-<data/time>.log.

6) Every 20 minutes, check if the database is down. If it is, send a notification to your AUIS email address.
result: 10/10

#!bin/bash
#Yahya Raaed Faleh    yr19102@auis.edu.krd
#Momen Mustafa Alhafidh  mm17273@auis.edu.krd


#Req1:
sudo apt update && sudo apt upgrade
sudo apt install mysql-server && sudo apt install mysql-client
sudo mysql_secure_installation
#complete database conf.
systemctl status mysql.service
sudo ufw status
sudo ufw allow mysql


#Req2:
sudo apt update && sudo apt upgrade
sudo apt install apache2
#to verify it installed 
#firefox
#write in search bar 10.0.2.15 (machine ip address)
sudo ufw allow 'Apache'
sudo systemctl start apache2.service


#Req3:
sudo systemctl enable mysql.service
sudo systemctl enable apache2.service


#Req4:
sudo renice -n -20 -u apache2


#Req5:
sudo mkdir /var/log/web
sudo touch log-apache-$(cd /var/log/apache2/ | grep access | date) /var/log/web
sudo watch -n 600 cat /var/log/apache2/access.log | tail -n 100 > /var/log/web/log-apache-$(cd var/log/apache2 | grep access | date)


#Req6:
touch error.txt ~
watch -n 1200 ps aux | grep mysql | echo $? | grep 1 && echo mysql is down > ~/error.txt
#echo $? command is to figure out if the process is still alive, if it gives 0 that means the process is alive, and if it gives 1 this means that process is down.
#another solution for Req6:
#systemctl status mysql | grep failed > ~/error.txt | sendmail yr19102@auis.edu.krd < ~/error.txt
#to use sendmail command, we have to install postfix package
sudo apt update && apt upgrade
sudo apt install postfix
sendmail yr19102@auis.edu.krd < ~/error.txt


#Citation
#1- phoenixnap.com/kb/install-mysql-ubuntu-20-04
#2- phoenixnap.com/kb/how-to-install-apache-web-server-on-ubuntu
#3- tecadmin.net/ways-to-send-email-from-linux-command-line/
#4- cyberciti.biz/faq/bach-check-if-process-is-running-or-notonlinuxuinix/
